name: 🔄 Add to Project Board

on:
  issues:
    types: [opened, reopened]
  pull_request_target:
    types: [opened, reopened]

jobs:
  add-to-project:
    name: Add Issue/PR to Project
    runs-on: ubuntu-latest
    
    steps:
      - name: 📋 Add to project
        uses: actions/add-to-project@v0.5.0
        with:
          # IMPORTANTE: Criar PAT com permissão 'project' e adicionar como secret
          # Settings → Developer settings → Personal access tokens → Generate new token
          # Adicionar em: Repository → Settings → Secrets → Actions
          project-url: https://github.com/users/DuckOverload/teaformation-site
          github-token: ${{ secrets.GITHUB_TOKEN }}
          
      - name: 🏷️ Set initial status
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            // Este script pode ser usado para configurar campos customizados
            // quando o item é adicionado ao project
            
            const itemType = context.payload.issue ? 'issue' : 'pull_request';
            const number = context.payload.issue?.number || context.payload.pull_request?.number;
            
            console.log(`Added ${itemType} #${number} to project`);
